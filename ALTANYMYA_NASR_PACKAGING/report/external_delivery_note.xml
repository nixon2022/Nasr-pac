<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="ALTANYMYA_NASR_PACKAGING.nasr_report_external_delivery_note_id">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page" dir="LTR"
                             style="font-family: arial; font-size: 14pt; font-weight: bold; width:100%">

                            <table class="table table-borderless" style="width:100%; line-height: 1;">

                                <tr>
                                    <td colspan="4"
                                        style="border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;">
                                        <center>
                                            EXTERNAL DELIVERY NOTE
                                            <div style="font-weight: normal;">(MANUFACTURING TO DISPATCH)</div>
                                        </center>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1" style="border-top: 1px solid black; border-left: 1px solid black;">
                                        Customer:
                                    </td>
                                    <td colspan="1"
                                        style="font-weight: normal; border-top: 1px solid black; border-left: 1px solid black;">
                                        <div t-field="o.partner_id"/>
                                    </td>
                                    <td colspan="1" style="border-top: 1px solid black; border-left: 1px solid black;">
                                        Customer ID:
                                    </td>
                                    <td colspan="1"
                                        style="font-weight: normal; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;">
                                        <t t-if="o.sale_order_id">
                                            <div t-field="o.sale_order_id.partner_id.company_new_field"/>
                                        </t>
                                        <t t-else=" ">
                                            <div t-field="o.sale_id.partner_id.company_new_field"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1"
                                        style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        P.O.#
                                    </td>
                                    <td colspan="1"
                                        style="font-weight: normal; border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        <t t-if="o.sale_order_id">
                                            <span t-field="o.sale_order_id.client_order_ref"/>
                                        </t>
                                        <t t-else=" ">
                                            <div t-field="o.sale_id.client_order_ref"/>
                                        </t>
                                    </td>
                                    <td colspan="1"
                                        style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        Sales order No:
                                    </td>
                                    <td colspan="1"
                                        style="font-weight: normal; border-bottom: 1px solid black; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;">
                                        <t t-if="o.sale_order_id">
                                            <span t-field="o.sale_order_id.name"/>
                                        </t>
                                        <t t-else=" ">
                                            <div t-field="o.sale_id.name"/>
                                        </t>
                                    </td>
                                </tr>
                            </table>

                            <table class="table table-borderless"
                                   style="text-align: center; width:100%; line-height: 1;">

                                <tr>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        SN#
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        Job ticket No
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        Product Description
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        Lot No.
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        No. of
                                        <br/>
                                        Pallets
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        No. of Carton/
                                        <br/>
                                        Pallet
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-left: 1px solid black;">
                                        No.<br/>Pcs./Carton
                                    </td>
                                    <td style="border-bottom: 1px solid black; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;">
                                        Total Qty
                                    </td>
                                </tr>
                                <t t-set="iterations" t-value="1"/>
                                <t t-foreach="o.move_line_ids_without_package" t-as="product">
                                    <tr style="font-weight: normal;">
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <span t-esc="iterations"/>
                                            <t t-set="iterations" t-value="iterations + 1"/>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <span t-field="o.group_id"/>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <span t-field="product.product_id"/>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <span t-field="product.lot_id"/>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <span t-field="product.pallet"/>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <t t-if="product.pallet and product.No_of_carton">
                                                <t t-set="carton" t-value="product.No_of_carton / product.pallet"/>
                                                <t t-esc="carton"/>
                                            </t>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-left: 1px solid black;">
                                            <t t-if="product.No_of_pcs and product.No_of_carton">
                                                <t t-set="pcs" t-value="product.No_of_pcs / product.No_of_carton"/>
                                                <t t-esc="pcs"/>
                                            </t>
                                        </td>
                                        <td style="border-bottom: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;">
                                            <span t-field="product.qty_done"/>
                                        </td>
                                    </tr>
                                </t>
                            </table>

                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>